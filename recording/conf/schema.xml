<?xml version="1.0"?>

<schema name="recording" version="1.5" xmlns:xi="http://www.w3.org/2001/XInclude">

  <!--Searchable Fields
  arid, artist, artistname, creditname, comment, country, date, dur, format,
  isrc, number, position, primarytype, puid, qdur, recording,
  recordingaccent, reid, release, rgid, rid, secondarytype, status, tid,
  tnum, tracks, tracksrelease, tag, SCHEMA type, video
  -->

  <!-- link to fieldType definitions for all cores-->
  <xi:include href="common/fieldtypes.xml" />

  <!-- mbid needs to be indexed because it's the unique key -->
  <field name="mbid" type="mbid" indexed="true" stored="true"
         required="true"/>

  <field name="recording" type="text_general" indexed="true" stored="true" />

  <field name="recordingaccent" type="keep_accent" indexed="true" stored="false"/>

  <field name="name" type="string" indexed="true" stored="true"
         required="true"/>

  <!-- artists -->
  <field name="arid" type="mbid" indexed="true" stored="false"
         multiValued="true" required="true"/>

  <field name="artist" type="text_general_multi" indexed="true" stored="false"
         required="true"/>

  <field name="artistname" type="text_general_multi" indexed="true"
         stored="false" multiValued="true" required="true"/>

  <field name="creditname" type="text_general_multi" indexed="true"
         stored="false" multiValued="true" required="false"/>

  <field name="isrc" type="lowercase_multi" indexed="true" stored="false"
         multiValued="true" />

  <!-- release groups -->
  <field name="rgid" type="mbid" indexed="true" stored="false"
         multiValued="true"/>

  <!-- releases this recording appears on -->
  <field name="reid" type="mbid" indexed="true" stored="false"
         multiValued="true" />

  <field name="puid" type="string" indexed="true" stored="false" />

  <field name="release" type="title_multi" indexed="true" stored="false"
         multiValued="true" />

  <field name="status" type="lowercase_multi" indexed="true" stored="false"
         multiValued="true" />

  <field name="format" type="lowercase_multi" indexed="true" stored="false"
         multiValued="true" />

  <field name="position" type="int" indexed="true" stored="false"
         multiValued="true"/>

  <field name="number" type="int" indexed="true" stored="false"
         multiValued="true" />

  <field name="tnum" type="int" indexed="true" stored="true"
         multiValued="true" />

  <field name="tracks" type="int" indexed="true" stored="false"
         multiValued="true"/>

  <field name="tracksrelease" type="int" indexed="true" stored="false"
         multiValued="true"/>

  <field name="tid" type="mbid" indexed="true" stored="false"
         multiValued="true"/>

  <!-- release events -->
  <field name="country" type="lowercase_multi" indexed="true" stored="false"
         multiValued="true"/>
  <field name="date" type="date" indexed="true" stored="false"/>

  <!-- types -->
  <field name="secondarytype" type="lowercase_multi" indexed="true"
         stored="false" multiValued="true" />
  <field name="primarytype" type="lowercase_multi" indexed="true"
         stored="false" multiValued="true" />
  <field name="type" type="lowercase_multi" indexed="true"
         stored="false" multiValued="true" />

  <field name="tag" type="text_general_multi" indexed="true" stored="false"
         multiValued="true" />
  <field name="comment" type="text_general" indexed="true" stored="false" />
  <field name="dur" type="long" indexed="true" stored="false" />
  <field name="qdur" type="long" indexed="true" stored="false" />
  <field name="video" type="bool" indexed="true" stored="false" required="true"/>

  <field name="_store" type="storefield" indexed="false" stored="true"
         multiValued="false" required="false"/>

  <field name="_version_" type="long" indexed="true" stored="true"/>


  <copyField source="primarytype" dest="type" />
  <copyField source="secondarytype" dest="type" />
  <copyField source="name" dest="recording" />
  <copyField source="name" dest="recordingaccent" />

  <!-- field to use to determine and enforce document uniqueness. -->
  <uniqueKey>mbid</uniqueKey>

    <!-- field for the QueryParser to use when an explicit fieldname is absent -->
  <defaultSearchField>recording</defaultSearchField>

</schema>

<!--
ID                    ("_id",	MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
ARTIST_ID		          ("arid", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
ARTIST                ("artist", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new MusicbrainzWithPosGapAnalyzer()),
ARTIST_NAME           ("artistname", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new MusicbrainzWithPosGapAnalyzer()),
ARTIST_NAMECREDIT     ("creditname", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new MusicbrainzWithPosGapAnalyzer()),
COMMENT		            ("comment",	MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED),
COUNTRY			          ("country",	MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
DURATION			        ("dur",	MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
FORMAT			          ("format", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
ISRC    		          ("isrc", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
NUM_TRACKS            ("tracks", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
NUM_TRACKS_RELEASE    ("tracksrelease", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
POSITION              ("position", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
NUMBER                ("number", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS),
PUID    		          ("puid", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
QUANTIZED_DURATION	  ("qdur", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
RECORDING_ID          ("rid", MusicBrainzFieldTypes.TEXT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
RECORDING             ("recording", MusicBrainzFieldTypes.TEXT_STORED_ANALYZED, new MusicbrainzWithPosGapAnalyzer()),
RECORDING_ACCENT      ("recordingaccent", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new MusicbrainzKeepAccentsAnalyzer()),
RELEASE				        ("release", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new TitleWithPosGapAnalyzer()),
RELEASE_DATE	        ("date", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
RELEASE_ID			      ("reid", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
RELEASE_PRIMARY_TYPE  ("primarytype", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
RELEASE_SECONDARY_TYPE("secondarytype", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
RELEASE_STATUS        ("status", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
RELEASE_TYPE          ("type", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
RELEASEGROUP_ID	      ("rgid", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
TAG		                ("tag", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED, new MusicbrainzWithPosGapAnalyzer()),
TRACKNUM			        ("tnum", MusicBrainzFieldTypes.TEXT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
TRACK_ID              ("tid", MusicBrainzFieldTypes.TEXT_NOT_STORED_NOT_ANALYZED_NO_NORMS, new KeywordAnalyzer()),
VIDEO                 ("video", MusicBrainzFieldTypes.TEXT_NOT_STORED_ANALYZED_NO_NORMS, new CaseInsensitiveKeywordAnalyzer()),
RECORDING_STORE		    ("recordingstore", MusicBrainzFieldTypes.TEXT_STORED_NOT_INDEXED),
-->
